<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pattern Development Guide - Regex Intelligence Exchange by Infopercept</title>
    <meta name="description" content="Advanced guide for creating and improving regex patterns in the Regex Intelligence Exchange">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container">
            <nav class="nav">
                <div class="logo">
                    <span class="logo-icon">üîç</span>
                    <span>Regex Intelligence Exchange</span>
                </div>
                <div class="nav-links">
                    <a href="../index.html">Home</a>
                    <a href="../pattern-database.html">Patterns</a>
                    <a href="../pattern-summary.html">Statistics</a>
                    <a href="beginners-guide.html">Getting Started</a>
                    <a href="good-first-issues.html">Contribute</a>
                </div>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="content">
            <h1>Pattern Development Guide</h1>
            
            <p>This guide is for experienced contributors who want to create advanced patterns or improve existing ones. It covers best practices, advanced techniques, and common pitfalls to avoid.</p>
            
            <h2>Advanced Pattern Design</h2>
            
            <div class="tip">
                <h3>Understanding Capture Groups</h3>
                <p>Capture groups are crucial for extracting version information. The <code>version_group</code> field specifies which capture group contains the version string. Make sure this is correctly set and tested.</p>
            </div>
            
            <div class="step">
                <h3>Complex Pattern Structures</h3>
                <p>For complex software that reports versions in multiple ways, consider creating multiple patterns in a single file:</p>
                <pre><code>{
  "vendor": "Example Vendor",
  "product": "Example Product",
  "all_versions": [
    {
      "name": "Header Pattern",
      "pattern": "Server: Example/([\\d.]+)",
      "version_group": 1,
      "priority": 150,
      "confidence": 0.9
    },
    {
      "name": "Body Pattern",
      "pattern": "Version: ([\\d.]+)",
      "version_group": 1,
      "priority": 100,
      "confidence": 0.8
    }
  ]
}</code></pre>
            </div>
            
            <div class="step">
                <h3>Version-Specific Patterns</h3>
                <p>For software with different version reporting mechanisms, use the <code>versions</code> field to organize patterns by version range:</p>
                <pre><code>{
  "vendor": "Example Vendor",
  "product": "Example Product",
  "versions": {
    "2.x": [
      {
        "name": "Version 2 Pattern",
        "pattern": "Example v2\\.([\\d]+)",
        "version_group": 1,
        "priority": 180,
        "confidence": 0.95
      }
    ],
    "3.x": [
      {
        "name": "Version 3 Pattern",
        "pattern": "Example v3\\.([\\d]+)",
        "version_group": 1,
        "priority": 180,
        "confidence": 0.95
      }
    ]
  }
}</code></pre>
            </div>
            
            <h2>Priority and Confidence Scoring</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Priority</div>
                    <div class="stat-value">0-200</div>
                    <div class="stat-description">Higher = More reliable</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-label">Confidence</div>
                    <div class="stat-value">0.0-1.0</div>
                    <div class="stat-description">Accuracy level</div>
                </div>
            </div>
            
            <h3>Priority Guidelines</h3>
            <ul>
                <li><strong>180-200</strong>: Highly specific patterns with minimal false positives</li>
                <li><strong>150-179</strong>: Specific patterns with good reliability</li>
                <li><strong>100-149</strong>: General patterns that work across versions</li>
                <li><strong>50-99</strong>: Broad patterns with potential for false positives</li>
                <li><strong>0-49</strong>: Experimental or low-confidence patterns</li>
            </ul>
            
            <h3>Confidence Guidelines</h3>
            <ul>
                <li><strong>0.9-1.0</strong>: Extremely reliable with comprehensive test cases</li>
                <li><strong>0.8-0.89</strong>: Very reliable with good test coverage</li>
                <li><strong>0.7-0.79</strong>: Reliable with adequate test coverage</li>
                <li><strong>0.5-0.69</strong>: Moderately reliable, needs more testing</li>
                <li><strong>0.0-0.49</strong>: Low confidence, experimental</li>
            </ul>
            
            <h2>Advanced Regex Techniques</h2>
            
            <div class="step">
                <h3>Non-Capturing Groups</h3>
                <p>Use non-capturing groups <code>(?:...)</code> for grouping without affecting version_group:</p>
                <pre><code>"pattern": "Server: (?:Apache|httpd)/([\\d.]+)"</code></pre>
            </div>
            
            <div class="step">
                <h3>Lookaheads and Lookbehinds</h3>
                <p>Use lookaheads <code>(?=...)</code> and lookbehinds <code>(?&lt;=...)</code> for context-sensitive matching:</p>
                <pre><code>"pattern": "(?&lt;=Server: )Apache/([\\d.]+)"</code></pre>
            </div>
            
            <div class="step">
                <h3>Escaping Special Characters</h3>
                <p>Remember to escape special regex characters in JSON strings:</p>
                <pre><code>// Correct - escaped backslashes
"pattern": "Server: Apache/([\\d.]+)"

// Incorrect - unescaped backslashes
"pattern": "Server: Apache/([\d.]+)"</code></pre>
            </div>
            
            <h2>Test Case Best Practices</h2>
            
            <div class="tip">
                <h3>Comprehensive Coverage</h3>
                <p>Include test cases for:</p>
                <ul>
                    <li>Positive matches with expected versions</li>
                    <li>Negative matches that should not match</li>
                    <li>Edge cases and unusual version formats</li>
                    <li>Different software deployment scenarios</li>
                </ul>
            </div>
            
            <div class="step">
                <h3>Example Test Cases</h3>
                <pre><code>"test_cases": [
  {
    "input": "Server: Apache/2.4.41 (Ubuntu)",
    "expected_version": "2.4.41"
  },
  {
    "input": "Server: nginx/1.18.0",
    "expected_version": "1.18.0"
  },
  {
    "input": "Server: IIS/10.0",
    "expected_version": "10.0"
  },
  {
    "input": "Server: Apache",  // No version
    "expected_version": null
  }
]</code></pre>
            </div>
            
            <h2>Performance Considerations</h2>
            
            <div class="warning">
                <h3>Avoid Catastrophic Backtracking</h3>
                <p>Write efficient regex patterns to avoid performance issues:</p>
                <ul>
                    <li>Use specific patterns instead of generic ones</li>
                    <li>Avoid nested quantifiers when possible</li>
                    <li>Use atomic groups <code>(?&gt;...)</code> for performance-critical patterns</li>
                    <li>Test patterns against large datasets to ensure performance</li>
                </ul>
            </div>
            
            <h2>Validation and Testing</h2>
            
            <div class="step">
                <h3>Using the Validation Tool</h3>
                <p>Always validate your patterns with our tool:</p>
                <pre><code>python tools/validate-new-pattern.py patterns/by-vendor/vendor/product.json</code></pre>
            </div>
            
            <div class="step">
                <h3>Manual Testing</h3>
                <p>Test your patterns manually with the pattern matcher:</p>
                <pre><code>python tools/pattern-matcher.py "Server: Apache/2.4.41" vendor product</code></pre>
            </div>
            
            <h2>Common Pitfalls to Avoid</h2>
            
            <div class="warning">
                <h3>False Positives</h3>
                <ul>
                    <li>Make patterns specific enough to avoid matching unrelated software</li>
                    <li>Test against diverse datasets to identify potential false positives</li>
                    <li>Use context clues to increase specificity</li>
                </ul>
            </div>
            
            <div class="warning">
                <h3>Version Extraction Issues</h3>
                <ul>
                    <li>Ensure version_group points to the correct capture group</li>
                    <li>Handle different version formats (semver, date-based, etc.)</li>
                    <li>Consider partial version strings vs. full versions</li>
                </ul>
            </div>
            
            <div class="text-center mt-3">
                <a href="beginners-guide.html" class="btn btn-primary">Beginner's Guide</a>
                <a href="good-first-issues.html" class="btn btn-secondary">Good First Issues</a>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Regex Intelligence Exchange by Infopercept. Open Source under MIT License.</p>
            <p>
                <a href="https://github.com/Infopercept/Regex-Intelligence-Exchange-by-Infopercept">GitHub Repository</a> | 
                <a href="../index.html">Home</a> | 
                <a href="../pattern-database.html">Pattern Database</a>
            </p>
        </div>
    </footer>
</body>
</html>